\chapter{Contributions}\label{chap:tra}

\section{Présentation de l'outil Acceleo}

Acceleo est un générateur de code Open Source développé par \kwobeo{} et la fondation Eclipse.
\\
Acceleo permet de générer du code, à partir de modèles basés sur le framework EMF (\cf{} \cite{emf}), en mettant en œuvre l'approche Model Driven Architecture (MDA). Le générateur Acceleo est une implémentation de la norme de l'Object Management Group \cite{omg} pour les transformations de modèle vers texte (Model to Text : M2T).

\subsection{Fonctionnement}

Comme la plupart des générateurs de code, Acceleo propose un système basé sur les templates : Les fichiers à générer peuvent être écrits avec des éléments statiques mélés à des éléments dynamiques. Ces élément dynamiques peuvent être obtenus grâce à des opérations basiques sur le Modèle (récupération d'un élément, d'un attribut, ...).

\subsubsection{Les Modules}

Dans Acceleo, un module est une unité de génération amenée a être utilisée par le générateur. Un générateur est donc une agrégation de Modules.
\\
Un Module est paramétré par un ou plusieurs DSL (ndla : définir précédemment, a vérifier) afin de pouvoir proposer les fonctionnalités associées, qui permettent notamment de parcourir chaque élément du Modèle.
\\
Chaque Module est composée d'un ou plusieurs templates. Un template a pour rôle de générer du code d'après un ou plusieurs paramètres (éléments du Modèle). L'utilisation des templates est très intuitive : Par défaut, le texte écrit dans un Template est recopié tel-quel dans le fichier qui sera généré en sortie. Afin d'insérer du contenu dynamique (base de la génération) dans le texte du Template, Acceleo utilise les balises \guim{\textbf{[}} (ouvrantes) et \guim{\textbf{/]}} (fermantes). Ces balisent permettent d'insérer un certain nombre d'instructions, comme la récupération d'un attribut d'un élément du Modèle, mais aussi des opérations conditionnelles ou des boucles de traitement.
\\
Par convention, chaque Module concerne un ou plusieurs aspects de la génération. Un Module peut également être dédié à la génération d'un type de fichier en particulier.

\begin{figure}[htb]
  \centering
  \includegraphics[scale=0.6]{img/screen_template.eps}
  \caption{(Exemple de fichier Module dans Acceleo)}
  \label{fig:acc_module}
\end{figure}

% Peut être une tite capture d'écran ici (Je m'en charge)

\subsubsection{Les Queries}

Les Modules permettent de décomposer la génération du code en plusieurs sous-parties réutilisables. Ils sont donc utiles pour générer un même type de contenu texte à partir de différents éléments du même type.\\
Cependant, dans certains cas, il est nécessaire d'exécuter une opération sur un élément du Modèle, comme la modification d'une chaine, ou l'accès à l'élément parent d'un élément, par exemple.\\
Les Queries interviennent alors comme un moyen de déporter ces opérations non-triviales dans une base commune. Les spécificité des Queries par rapport aux templates est que ces dernières mettent en cache leur résultat. Ainsi, si une Query est appelée deux fois avec les mêmes paramètres, celle-ci ne sera pas re-calculée et se contentera de retourner le résultat obtenu précédement. Cette fonctionnalité est donc très utile pour l'appel répétitif d'opérations (même basiques), ou le stockage de variables globales.\\
Les Queries permettent plus généralement de structure le générateur. Par convention, les générations de texte sont traitées dans des templates, tandis que les opérations plus complexes (modification de chaine, parcours d'éléments) ou répétitive sont déportées dans des Queries.

\begin{figure}[htb]
  \centering
  \includegraphics[scale=0.6]{img/screen_query.eps}
  \caption{(Exemple de Queries dans Acceleo)}
  \label{fig:acc_module}
\end{figure}

\subsubsection{Les Services}

Les Services peuvent être vus comme une extension des Queries. Là où les opérations exécutables des Query se limitent à celles d'Ocl (TODO : Aborder Ocl). Le principe des Services consiste à appeler du code Java depuis une Query via des invocations de méthodes. Cela permet d'effectuer des opérations complexes ou bien de stocker un certain nombre d'informations via du code Java. Ces informations restent récupérables depuis les templates pendant toute la durée de la génération de code.


%\subsection{Déploiement}
%
%Afin de gérer le déploiement des différents générateurs de %code, 

% Causer du système de menus/plugins/etc


\input{4a_Travaux_Entity} 
\input{4b_Travaux_SOA}
\input{4c_Travaux_Cinematic}

